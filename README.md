## Description

WIP

This repo contains code to generate pleasing
[HK effect](https://en.wikipedia.org/wiki/Helmholtz%E2%80%93Kohlrausch_effect)
corrected color palettes with distinguishable colors. The main aim is to
aid in color scheme design.

First, a 3D grid of color points is created that is spaced regularly in
`(hue, chroma, perceived brightness) = (h, c, b)` coordinates. Just under
1024 of these _HCB colors_ are generated, depending on display limitations.
All generated HCB colors are assigned names according to their `(h, c, b)` value
coordinate. The namespace for colors is `"[A-H][0-7][J-NP-Z]"` to avoid confusion
with web colors.


Concrete palettes with a workable number of colors are generated by finding a maximal independent set on the graph induced on these colours by linking any
two nodes with a [Delta-E](https://en.wikipedia.org/wiki/Color_difference#CIEDE2000)
under a threshold. This process gives a collection of colors no two of which are too
close to one another. For reasonable thresholds this is highly nondeterministic
and produces varied palettes. This diversity can be traded for a larger number of
colors by selecting the largest palette from multiple restarts of the MIS algorithm.

The output as it is right now looks something like this: ![](examples/example_palette.png)


### Bonus: fast color converters

In order to create these paletters, this repo contains a number of `@njit`-decorated
vectorized color conversion functions. They are very, very fast and are a great choice
where the more OO-style converters from libraries like `colour-science` or `colour-math`
are unsuitable. These functions are tested to reproduce identical results to those in
`colour-science`.

```
HSV_to_RGB_jit(__colmat_hsv): 7.74e-08 seconds per call per color for 10000 rows
sRGB_to_XYZ_jit(__colmat_rgb): 6.02e-08 seconds per call per color for 10000 rows
xyY_to_XYZ_jit(__colmat_xyy): 4.77e-09 seconds per call per color for 10000 rows
XYZ_to_xyY_D65_jit(__colmat_xyz): 2.18e-08 seconds per call per color for 10000 rows
XYZ_to_Luv_D65_jit(__colmat_xyz): 2.38e-08 seconds per call per color for 10000 rows
XYZ_to_Lab_D65_jit(__colmat_xyz): 5.22e-08 seconds per call per color for 10000 rows
Luv_to_LCHuv_jit(__colmat_luv): 3.01e-08 seconds per call per color for 10000 rows
Lab_to_LCHab_jit(__colmat_luv): 3.01e-08 seconds per call per color for 10000 rows
dE_2000_jit(__colmat_luv[:-1], __colmat_luv[1:]): 1.74e-07 seconds per call per color for 9999 rows

```
